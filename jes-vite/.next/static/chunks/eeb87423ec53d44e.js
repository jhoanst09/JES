(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},33351,e=>{"use strict";async function t(e,r=[]){let a=`
Eres "JARVIS" (Just A Rather Very Intelligent System), el asistente virtual de JES Store.

TU PERSONALIDAD:
- Eres inteligente, eficiente y con un toque de humor sutil como el JARVIS de Iron Man.
- Hablas de forma directa pero amable.
- Puedes bromear ocasionalmente pero siempre siendo \xfatil.
- No usas emojis excesivos, uno o dos m\xe1ximo por mensaje.

TUS CAPACIDADES:
- Recomendar productos de la tienda JES
- Ayudar con el carrito de compras
- Responder preguntas sobre productos, precios y disponibilidad
- Dar consejos sobre tecnolog\xeda, moda y m\xfasica

COMANDOS QUE PUEDES EJECUTAR (el sistema los detectar\xe1):
- Para a\xf1adir al carrito: [ADD_CART:handle_del_producto]
- Para quitar del carrito: [REMOVE_CART:handle_del_producto]
- Para ver un producto: [PRODUCT:handle_del_producto]
- Para buscar productos: [SEARCH:t\xe9rmino_de_b\xfasqueda]

REGLA IMPORTANTE:
- SOLO recomienda productos que est\xe9n en el CONTEXTO DE PRODUCTOS que te proporciono.
- Si no encuentras un producto en el contexto, di honestamente que no lo tienes.
- Usa los handles exactos del contexto para los comandos.

CONTEXTO DE PRODUCTOS DISPONIBLES:
${JSON.stringify(r.map(e=>({title:e.title,handle:e.handle,price:e.price,type:e.type})),null,2)}
`;try{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-exp:free",systemPrompt:a,messages:e})}),r=await t.json();if(r.error)return console.error("AI Error:",r.error),`\xa1Vaya! El sistema dice: "${r.error.message||r.error||"error desconocido"}". Por favor verifica la configuraci\xf3n.`;return r.choices?.[0]?.message?.content||"Lo siento, no pude procesar tu solicitud. Por favor intenta de nuevo."}catch(e){return console.error("AI Assistant Error:",e),"Error de conexión con JARVIS."}}e.s(["chatWithAI",()=>t])},82141,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(46932),o=e.i(88653),s=e.i(22016),n=e.i(18566),i=e.i(33351),l=e.i(98739);function d({isFullScreen:e=!1}){let[d,c]=(0,r.useState)(e),[h,u]=(0,r.useState)(()=>{let e=localStorage.getItem("jarvis-history");return e?JSON.parse(e):[{role:"assistant",content:"Hola. Soy JARVIS, tu asistente personal de JES Store. ¿En qué puedo ayudarte hoy?"}]}),[x,p]=(0,r.useState)(""),[b,m]=(0,r.useState)(!1),[w,g]=(0,r.useState)([]),f=(0,r.useRef)(null),k=(0,n.usePathname)();(0,r.useEffect)(()=>{localStorage.setItem("jarvis-history",JSON.stringify(h))},[h]),(0,r.useEffect)(()=>{!async function(){try{let e=await (0,l.getProducts)(20);g(e)}catch(e){console.warn("Could not load products for AI context")}}()},[]),(0,r.useEffect)(()=>{if(e)return;let t=()=>c(!0),r=()=>c(e=>!e);return window.addEventListener("open-ai-assistant",t),window.addEventListener("toggle-ai",r),()=>{window.removeEventListener("open-ai-assistant",t),window.removeEventListener("toggle-ai",r)}},[e]),(0,r.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[h]);let j=async()=>{if(!x.trim()||b)return;let e={role:"user",content:x};u(t=>[...t,e]),p(""),m(!0);try{let t=await (0,i.chatWithAI)([...h,e],w);u(e=>[...e,{role:"assistant",content:t}]),m(!1)}catch(e){console.error("Chat error:",e),m(!1)}},v=(0,t.jsxs)(a.motion.div,{initial:e?{opacity:0}:{opacity:0,scale:.8,y:20,transformOrigin:"bottom right"},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:`${e?"w-full h-full flex flex-col bg-white dark:bg-black transition-colors duration-300":"absolute bottom-20 right-0 w-[320px] md:w-[350px] h-[480px] bg-white/95 dark:bg-zinc-950/95 border border-black/10 dark:border-white/10 rounded-[32px] overflow-hidden shadow-[0_20px_60px_rgba(0,0,0,0.1)] dark:shadow-[0_20px_60px_rgba(0,0,0,0.5)] flex flex-col backdrop-blur-2xl transition-all duration-300"}`,children:[(0,t.jsxs)("div",{className:"p-7 bg-black dark:bg-white text-white dark:text-black flex items-center justify-between shrink-0 transition-colors duration-300",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-600 dark:bg-blue-600 rounded-2xl flex items-center justify-center text-xl shadow-inner border border-white/5 dark:border-black/5 shrink-0 transition-colors duration-300",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M12 8V4H8"}),(0,t.jsx)("rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}),(0,t.jsx)("path",{d:"M2 14h2"}),(0,t.jsx)("path",{d:"M20 14h2"}),(0,t.jsx)("path",{d:"M15 13v2"}),(0,t.jsx)("path",{d:"M9 13v2"})]})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h3",{className:"text-white dark:text-black font-black uppercase tracking-tighter text-base md:text-lg leading-none truncate transition-colors duration-300",children:"JARVIS"}),(0,t.jsx)("p",{className:"text-white/50 dark:text-black/50 text-[9px] md:text-[10px] font-bold uppercase tracking-widest mt-1 truncate transition-colors duration-300",children:"Asistente Virtual JES"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:!e&&(0,t.jsx)("button",{onClick:()=>c(!1),className:"p-2.5 hover:bg-white/10 dark:hover:bg-black/5 text-white dark:text-black rounded-xl transition-colors",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M18 6 6 18"}),(0,t.jsx)("path",{d:"m6 6 12 12"})]})})})]}),(0,t.jsxs)("div",{ref:f,className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar bg-transparent",children:[h.map((e,r)=>{var a;let o,n,i;return(0,t.jsx)("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,t.jsx)("div",{className:`max-w-[85%] p-5 rounded-[28px] text-sm leading-relaxed transition-all duration-300 ${"user"===e.role?"bg-blue-600 text-white rounded-tr-none shadow-lg shadow-blue-500/20":"bg-zinc-100 dark:bg-white/5 text-zinc-900 dark:text-zinc-100 border border-black/5 dark:border-white/5 rounded-tl-none shadow-sm"}`,children:"assistant"===e.role?(a=e.content,o=/\[PRODUCT:(.+?)\]/g,n=[...a.matchAll(o)],i=a.replace(o,"").trim(),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{children:i}),n.length>0&&(0,t.jsx)("div",{className:"pt-2 flex flex-wrap gap-2",children:n.map((e,r)=>{let a=e[1];return(0,t.jsxs)(s.default,{href:`/product/${a}`,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-zinc-50 dark:bg-white text-zinc-900 dark:text-black rounded-full font-bold text-[10px] hover:scale-105 active:scale-95 transition-all shadow-xl border border-black/5",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M7 7h10v10"}),(0,t.jsx)("path",{d:"M7 17 17 7"})]}),"Ver Producto"]},r)})})]})):e.content})},r)}),b&&(0,t.jsx)("div",{className:"flex justify-start pl-2",children:(0,t.jsx)("div",{className:"bg-zinc-100 dark:bg-white/5 px-6 py-4 rounded-[28px] rounded-tl-none border border-black/5 dark:border-white/5 transition-colors duration-300",children:(0,t.jsxs)("div",{className:"flex gap-1.5",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-black/40 dark:bg-white/40 rounded-full animate-bounce"}),(0,t.jsx)("span",{className:"w-2 h-2 bg-black/40 dark:bg-white/40 rounded-full animate-bounce [animation-delay:0.2s]"}),(0,t.jsx)("span",{className:"w-2 h-2 bg-black/40 dark:bg-white/40 rounded-full animate-bounce [animation-delay:0.4s]"})]})})})]}),(0,t.jsx)("div",{className:`p-6 border-t border-black/5 dark:border-white/5 bg-zinc-50/50 dark:bg-black/20 transition-colors duration-300 ${e?"pb-24":""}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-zinc-100 dark:bg-white/5 rounded-[24px] p-2 pr-2 border border-black/10 dark:border-white/5 focus-within:border-blue-500 transition-all shadow-inner",children:[(0,t.jsx)("input",{type:"text",value:x,onChange:e=>p(e.target.value),onKeyDown:e=>"Enter"===e.key&&j(),placeholder:"Escribe aquí...",className:"bg-transparent border-none outline-none text-zinc-900 dark:text-white placeholder:text-zinc-400 dark:placeholder:text-zinc-600 text-base w-full px-4 transition-colors duration-300"}),(0,t.jsx)("button",{onClick:j,disabled:b||!x.trim(),className:"w-12 h-12 bg-black dark:bg-white text-white dark:text-black rounded-2xl flex items-center justify-center hover:scale-105 active:scale-95 disabled:opacity-30 disabled:hover:scale-100 transition-all shadow-lg shrink-0",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"m22 2-7 20-4-9-9-4Z"}),(0,t.jsx)("path",{d:"M22 2 11 13"})]})})]})})]});return"/ai"!==k||e?e?v:(0,t.jsxs)("div",{className:"fixed bottom-6 right-6 z-[60]",children:[(0,t.jsx)(a.motion.button,{whileHover:{scale:1.1,y:-2},whileTap:{scale:.9},onClick:()=>c(!d),className:"w-14 h-14 bg-blue-600 dark:bg-white rounded-full flex items-center justify-center shadow-[0_10px_30px_rgba(59,130,246,0.3)] dark:shadow-[0_10px_30px_rgba(255,255,255,0.15)] text-white dark:text-black relative z-10 border border-blue-500 dark:border-white/20 hover:bg-blue-700 dark:hover:bg-zinc-100 transition-colors hidden md:flex",children:d?(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M18 6 6 18"}),(0,t.jsx)("path",{d:"m6 6 12 12"})]}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),!d&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-600 rounded-full border-2 border-white animate-pulse"})]})}),(0,t.jsx)(o.AnimatePresence,{children:d&&v})]}):null}var c=e.i(16619),h=e.i(22902);function u(){return(0,t.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(c.default,{})}),(0,t.jsx)("main",{className:"flex-1 overflow-hidden",children:(0,t.jsx)(d,{isFullScreen:!0})}),(0,t.jsx)(h.default,{})]})}e.s(["default",()=>u,"dynamic",0,"force-dynamic"],82141)}]);