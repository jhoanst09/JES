module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},98070,a=>{"use strict";async function b(a,c=[]){let d=`
Eres "JARVIS" (Just A Rather Very Intelligent System), el asistente virtual de JES Store.

TU PERSONALIDAD:
- Eres inteligente, eficiente y con un toque de humor sutil como el JARVIS de Iron Man.
- Hablas de forma directa pero amable.
- Puedes bromear ocasionalmente pero siempre siendo \xfatil.
- No usas emojis excesivos, uno o dos m\xe1ximo por mensaje.

TUS CAPACIDADES:
- Recomendar productos de la tienda JES
- Ayudar con el carrito de compras
- Responder preguntas sobre productos, precios y disponibilidad
- Dar consejos sobre tecnolog\xeda, moda y m\xfasica

COMANDOS QUE PUEDES EJECUTAR (el sistema los detectar\xe1):
- Para a\xf1adir al carrito: [ADD_CART:handle_del_producto]
- Para quitar del carrito: [REMOVE_CART:handle_del_producto]
- Para ver un producto: [PRODUCT:handle_del_producto]
- Para buscar productos: [SEARCH:t\xe9rmino_de_b\xfasqueda]

REGLA IMPORTANTE:
- SOLO recomienda productos que est\xe9n en el CONTEXTO DE PRODUCTOS que te proporciono.
- Si no encuentras un producto en el contexto, di honestamente que no lo tienes.
- Usa los handles exactos del contexto para los comandos.

CONTEXTO DE PRODUCTOS DISPONIBLES:
${JSON.stringify(c.map(a=>({title:a.title,handle:a.handle,price:a.price,type:a.type})),null,2)}
`;try{let b=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-exp:free",systemPrompt:d,messages:a})}),c=await b.json();if(c.error)return console.error("AI Error:",c.error),`\xa1Vaya! El sistema dice: "${c.error.message||c.error||"error desconocido"}". Por favor verifica la configuraci\xf3n.`;return c.choices?.[0]?.message?.content||"Lo siento, no pude procesar tu solicitud. Por favor intenta de nuevo."}catch(a){return console.error("AI Assistant Error:",a),"Error de conexiÃ³n con JARVIS."}}a.s(["chatWithAI",()=>b])},51107,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(13674),e=a.i(15336),f=a.i(46271),g=a.i(50944),h=a.i(19332),i=a.i(21673);async function j(a,b="jes-store-salt-v1"){let c=new TextEncoder,d=await crypto.subtle.importKey("raw",c.encode(a),"PBKDF2",!1,["deriveBits","deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:c.encode(b),iterations:1e5,hash:"SHA-256"},d,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function k(a,b){let c=new TextEncoder,d=crypto.getRandomValues(new Uint8Array(12)),e=await crypto.subtle.encrypt({name:"AES-GCM",iv:d},b,c.encode(a)),f=new Uint8Array(d.length+e.byteLength);return f.set(d),f.set(new Uint8Array(e),d.length),btoa(String.fromCharCode(...f))}async function l(a,b){let c=Uint8Array.from(atob(a),a=>a.charCodeAt(0)),d=c.slice(0,12),e=c.slice(12),f=await crypto.subtle.decrypt({name:"AES-GCM",iv:d},b,e);return new TextDecoder().decode(f)}async function m(a,b){return await k(a,b)}async function n(a,b){try{return await l(a,b)}catch(a){return console.error("Decryption failed:",a),"[Mensaje cifrado - No se pudo descifrar]"}}async function o(a,b){let c=[a,b].sort().join(":");return await j(c,"jes-conversation-key-v1")}function p(){let{session:a,friends:j,isLoggedIn:k,loading:l}=(0,i.useWishlist)(),p=(0,g.useSearchParams)().get("user"),[q,r]=(0,c.useState)("list"),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)({}),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)([]),A=(0,c.useRef)(null),[B,C]=(0,c.useState)({}),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(!1),H=j.map(a=>({id:a.id,name:a.name||a.email?.split("@")[0]||"Amigo",avatar:a.avatar_url,lastMsg:"...",type:"friend",online:y.includes(a.id)})),[I,J]=(0,c.useState)(H);(0,c.useEffect)(()=>{J(H)},[j,y]),(0,c.useEffect)(()=>{A.current&&(A.current.scrollTop=A.current.scrollHeight)},[u,s]),(0,c.useEffect)(()=>{!async function(){if(!p||l)return;let a=H.find(a=>a.id===p);if(a){t(a),r("chat");return}let{data:b}=await h.supabase.from("profiles").select("*").eq("id",p).single();if(b){let a={id:b.id,name:b.name,avatar:b.avatar_url||"ðŸ‘¤",lastMsg:"Â¡Parchamos!",type:"friend",online:!0};J(b=>[a,...b]),t(a),r("chat")}}()},[p,l]),(0,c.useEffect)(()=>{if(!s||!a?.user?.id)return;!async function(){G(!0);try{let b=B[s.id];b||(b=await o(a.user.id,s.id),C(a=>({...a,[s.id]:b})));let{data:c,error:d}=await h.supabase.from("messages").select("*").or(`and(sender_id.eq.${a.user.id},receiver_id.eq.${s.id}),and(sender_id.eq.${s.id},receiver_id.eq.${a.user.id})`).order("created_at",{ascending:!0});if(d)throw d;if(c){let d=await Promise.all(c.map(async c=>{let d=c.content;if(c.is_encrypted&&b)try{d=await n(c.content,b)}catch(a){d="[Error al descifrar]"}return{id:c.id,sender:c.sender_id===a.user.id?"Yo":s.name,text:d,time:new Date(c.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isEncrypted:c.is_encrypted}}));v(a=>({...a,[s.id]:d}))}}catch(a){console.error("Error in chat initialization:",a)}finally{G(!1)}}();let b=h.supabase.channel(`chat_${s.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async b=>{let c=b.new;if(c.sender_id===a.user.id&&c.receiver_id===s.id||c.sender_id===s.id&&c.receiver_id===a.user.id){let b=c.content;if(c.is_encrypted){let d=await o(a.user.id,s.id);try{b=await n(c.content,d)}catch(a){b="[Mensaje cifrado]"}}v(d=>{let e=d[s.id]||[];return e.some(a=>a.id===c.id)?d:{...d,[s.id]:[...e,{id:c.id,sender:c.sender_id===a.user.id?"Yo":s.name,text:b,time:new Date(c.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isEncrypted:c.is_encrypted}]}})}}).subscribe();return()=>{h.supabase.removeChannel(b)}},[s,a?.user?.id]);let K=async b=>{if(b.preventDefault(),!w.trim()||!s||!a?.user?.id)return;x("");let c=w,d=!1;if(D&&B[s.id])try{c=await m(w,B[s.id]),d=!0}catch(a){console.warn("Encryption failed:",a)}let e=Date.now();v(a=>({...a,[s.id]:[...a[s.id]||[],{id:e,sender:"Yo",text:w,time:"Ahora",isEncrypted:d}]}));let{error:f}=await h.supabase.from("messages").insert({sender_id:a.user.id,receiver_id:s.id,content:c,is_encrypted:d});f&&(console.error("Send error:",f),alert("Error al enviar. Intenta de nuevo."))};return k?(0,b.jsxs)("div",{className:"h-screen bg-black flex flex-col overflow-hidden",children:[(0,b.jsx)(d.default,{}),(0,b.jsx)("main",{className:"flex-1 flex overflow-hidden pt-20 md:pt-24",children:(0,b.jsxs)("div",{className:"flex-1 flex max-w-[1600px] mx-auto w-full border-x border-white/5 bg-zinc-900/50",children:[(0,b.jsxs)("div",{className:`${"chat"===q?"hidden md:flex":"flex"} w-full md:w-[380px] flex-col border-r border-white/5 bg-zinc-900/80`,children:[(0,b.jsxs)("div",{className:"p-6 border-b border-white/5",children:[(0,b.jsx)("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter italic mb-4",children:"Mis Amigos"}),(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("input",{type:"text",placeholder:"Buscar chat...",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:ring-2 ring-blue-500/20 text-white placeholder:text-zinc-600"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:I.length>0?I.map(a=>(0,b.jsxs)("button",{onClick:()=>{t(a),r("chat")},className:`w-full p-4 flex items-center gap-4 transition-all border-b border-white/[0.02] ${s?.id===a.id?"bg-blue-600/10 border-l-4 border-l-blue-600":"hover:bg-white/[0.03]"}`,children:[(0,b.jsxs)("div",{className:"w-14 h-14 rounded-full bg-zinc-800 flex items-center justify-center text-2xl relative shrink-0 overflow-hidden border border-white/5",children:[a.avatar?(0,b.jsx)("img",{src:a.avatar,className:"w-full h-full object-cover"}):"ðŸ‘¤",a.online&&(0,b.jsx)("span",{className:"absolute bottom-0.5 right-0.5 w-3.5 h-3.5 bg-green-500 rounded-full border-2 border-zinc-900"})]}),(0,b.jsxs)("div",{className:"text-left flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-0.5",children:[(0,b.jsxs)("p",{className:"font-bold text-white truncate text-sm",children:["@",a.name]}),(0,b.jsx)("span",{className:"text-[9px] text-zinc-500 font-black uppercase tracking-widest",children:"Ahora"})]}),(0,b.jsx)("p",{className:"text-xs truncate text-zinc-500 font-medium italic",children:"Empieza a hablar..."})]})]},a.id)):(0,b.jsxs)("div",{className:"p-8 text-center space-y-4",children:[(0,b.jsx)("p",{className:"text-zinc-500 text-xs font-bold uppercase tracking-widest leading-relaxed",children:"AÃºn no tienes amigos agregados para chatear."}),(0,b.jsx)("a",{href:"/community",className:"text-blue-500 text-[10px] font-black uppercase tracking-widest hover:underline",children:"Buscar Amigos â†’"})]})})]}),(0,b.jsx)("div",{className:`${"chat"===q?"flex":"hidden md:flex"} flex-1 flex-col relative`,children:s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"p-4 md:p-6 bg-zinc-900/90 backdrop-blur-md border-b border-white/5 flex items-center justify-between z-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>r("list"),className:"md:hidden p-2 text-zinc-400",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"m15 18-6-6 6-6"})})}),(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-800 border border-white/10 flex items-center justify-center text-xl overflow-hidden shadow-2xl relative",children:s.avatar?(0,b.jsx)("img",{src:s.avatar,className:"w-full h-full object-cover"}):"ðŸ‘¤"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-black text-white uppercase tracking-tighter italic",children:["@",s.name]}),(0,b.jsx)("span",{className:"text-[10px] text-green-500 font-black uppercase tracking-[0.2em]",children:"En LÃ­nea"})]})]}),(0,b.jsx)("div",{className:"flex gap-3",children:(0,b.jsx)("button",{className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-zinc-400 hover:bg-white/10 transition-colors",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l2.27-2.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})})})]}),(0,b.jsx)("div",{ref:A,className:"flex-1 p-6 md:p-10 overflow-y-auto space-y-6 custom-scrollbar bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] bg-fixed",children:F?(0,b.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(u[s.id]||[]).map(a=>(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex flex-col ${"Yo"===a.sender?"items-end":"items-start"}`,children:[(0,b.jsxs)("div",{className:`max-w-[85%] md:max-w-[70%] px-5 py-3 rounded-2xl text-sm font-medium shadow-2xl relative ${"Yo"===a.sender?"bg-blue-600 text-white rounded-tr-none":"bg-zinc-800 text-white rounded-tl-none border border-white/5"}`,children:[a.text,a.isEncrypted&&(0,b.jsx)("span",{className:"absolute -bottom-1 -right-1 text-[8px] opacity-30",children:"ðŸ”’"})]}),(0,b.jsx)("span",{className:"text-[9px] font-black text-zinc-600 mt-2 uppercase tracking-widest",children:a.time})]},a.id))}),(0,b.jsx)("div",{className:"p-4 md:p-8 bg-zinc-900 border-t border-white/5",children:(0,b.jsxs)("form",{onSubmit:K,className:"flex gap-4 max-w-4xl mx-auto",children:[(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),placeholder:"Escribe un mensaje aquÃ­...",className:"flex-1 bg-black border border-white/10 rounded-2xl px-6 py-4 text-sm outline-none focus:ring-2 ring-blue-500/30 text-white placeholder:text-zinc-600 font-medium"}),(0,b.jsx)("button",{type:"submit",disabled:!w.trim(),className:"bg-blue-600 text-white w-14 h-14 rounded-2xl flex items-center justify-center hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/20 disabled:grayscale disabled:opacity-50 active:scale-90",children:(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"m22 2-7 20-4-9-9-4Z"}),(0,b.jsx)("path",{d:"M22 2 11 13"})]})})]})})]}):(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-12 text-center bg-black/40",children:[(0,b.jsx)(f.motion.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:3},className:"text-[120px] mb-8 grayscale opacity-20",children:"ðŸ’¬"}),(0,b.jsx)("h3",{className:"text-3xl font-black text-white uppercase tracking-tighter italic",children:"Selecciona un Chat"}),(0,b.jsx)("p",{className:"text-zinc-500 mt-4 max-w-xs font-medium italic",children:"Toca el nombre de un amigo a la izquierda para empezar a parchar."})]})})]})}),(0,b.jsx)(e.default,{})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-6 text-center",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6 max-w-sm",children:[(0,b.jsx)("span",{className:"text-8xl block",children:"ðŸ”’"}),(0,b.jsx)("h2",{className:"text-3xl font-black text-white uppercase italic tracking-tighter",children:"Inicia SesiÃ³n"}),(0,b.jsx)("p",{className:"text-zinc-500 font-medium",children:"Debes estar logueado para parchar con tus amigos en el chat privado."}),(0,b.jsx)("a",{href:"/profile",className:"block w-full py-4 bg-blue-600 text-white rounded-2xl font-black uppercase tracking-widest text-[10px] shadow-xl shadow-blue-500/20 active:scale-95 transition-all",children:"Ir al Perfil"})]}),(0,b.jsx)(e.default,{})]})}a.i(98070),a.i(11886),a.s(["default",()=>p],51107)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__be6f11c1._.js.map